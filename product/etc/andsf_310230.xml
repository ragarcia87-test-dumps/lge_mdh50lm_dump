<ANDSF version="1">
  <Name>TMUS ANDSF Policy</Name>
  <ISRP>
    <Node>
      <ForServiceBased>
        <!-- IMS APN -->
        <MAPCON_LTE_X_WIFI_X>
          <APN>ims</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <WiFiThreshold>
                    <WiFiAvailable>0</WiFiAvailable>
                  </WiFiThreshold>
                  <LTEThreshold>
                    <LTEAvailable>0</LTEAvailable>
                  </LTEThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
            </Node>
          </RoutingCriteria>
          <RoutingRule>
            <Node>
            </Node>
          </RoutingRule>
          <IsAPIOverride>1</IsAPIOverride>
          <RulePriority>1</RulePriority>
        </MAPCON_LTE_X_WIFI_X>
        <MAPCON_CELLULAR_X_WIFI_O>
          <APN>ims</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <LTEThreshold>
                    <LTEAvailable>0</LTEAvailable>
                    <UMTSAvailable>0</UMTSAvailable>
                    <GSMAvailable>0</GSMAvailable>
                  </LTEThreshold>
                  <WiFiThreshold>
                    <WiFiRSSIHigh>-70</WiFiRSSIHigh>
                    <WiFiAvailable>1</WiFiAvailable>
                  </WiFiThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
            </Node>
          </RoutingCriteria>
          <RoutingRule>
            <Node>
              <AccessTechnology>3</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
          </RoutingRule>
          <IsAPIOverride>1</IsAPIOverride>
          <RulePriority>2</RulePriority>
        </MAPCON_CELLULAR_X_WIFI_O>
<!-- WCMA call idle, Wifi prefer -->
        <MAPCON_WCDMA_RSCP_BAD_WIFI_GOOD>
          <APN>ims</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <LTEThreshold>
                    <LTEAvailable>0</LTEAvailable>
                    <UMTSRscpLow>-110</UMTSRscpLow>
                    <UMTSAvailable>1</UMTSAvailable>
                  </LTEThreshold>
                  <WiFiThreshold>
                    <WiFiRSSIHigh>-70</WiFiRSSIHigh>
                    <WiFiAvailable>1</WiFiAvailable>
                  </WiFiThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
            </Node>
          </RoutingCriteria>
          <RoutingRule>
            <Node>
              <AccessTechnology>3</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
          </RoutingRule>
          <IsAPIOverride>1</IsAPIOverride>
          <RulePriority>3</RulePriority>
        </MAPCON_WCDMA_RSCP_BAD_WIFI_GOOD>
<!-- call idle, wifi or cellular -->
        <MAPCON_WCDMA_RSCP_GOOD_WIFI_GOOD>
          <APN>ims</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <LTEThreshold>
                    <LTEAvailable>0</LTEAvailable>
                    <UMTSRscpHigh>-100</UMTSRscpHigh>
                    <UMTSAvailable>1</UMTSAvailable>
                  </LTEThreshold>
                  <WiFiThreshold>
                    <WiFiRSSIHigh>-70</WiFiRSSIHigh>
                    <WiFiAvailable>1</WiFiAvailable>
                  </WiFiThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
            </Node>
          </RoutingCriteria>
          <RoutingRule>
            <Node>
              <AccessTechnology>1</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
            <Node>
              <AccessTechnology>3</AccessTechnology>
              <AccessNetworkPriority>2</AccessNetworkPriority>
            </Node>
          </RoutingRule>
          <IsAPIOverride>1</IsAPIOverride>
          <RulePriority>3</RulePriority>
        </MAPCON_WCDMA_RSCP_GOOD_WIFI_GOOD>
        <MAPCON_WCDMA_RSCP_BAD_WIFI_BAD>
          <APN>ims</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <LTEThreshold>
                    <LTEAvailable>0</LTEAvailable>
                    <UMTSRscpLow>-110</UMTSRscpLow>
                    <UMTSAvailable>1</UMTSAvailable>
                  </LTEThreshold>
                  <WiFiThreshold>
                    <WiFiRSSILow>-80</WiFiRSSILow>
                    <WiFiAvailable>1</WiFiAvailable>
                  </WiFiThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
            </Node>
          </RoutingCriteria>
          <RoutingRule>
            <Node>
              <AccessTechnology>1</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
          </RoutingRule>
          <IsAPIOverride>1</IsAPIOverride>
          <RulePriority>3</RulePriority>
        </MAPCON_WCDMA_RSCP_BAD_WIFI_BAD>
        <MAPCON_WCDMA_RSCP_GOOD_WIFI_BAD>
          <APN>ims</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <LTEThreshold>
                    <LTEAvailable>0</LTEAvailable>
                    <UMTSRscpHigh>-100</UMTSRscpHigh>
                    <UMTSAvailable>1</UMTSAvailable>
                  </LTEThreshold>
                  <WiFiThreshold>
                    <WiFiRSSILow>-80</WiFiRSSILow>
                    <WiFiAvailable>1</WiFiAvailable>
                  </WiFiThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
            </Node>
          </RoutingCriteria>
          <RoutingRule>
            <Node>
              <AccessTechnology>1</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
          </RoutingRule>
          <IsAPIOverride>1</IsAPIOverride>
          <RulePriority>3</RulePriority>
        </MAPCON_WCDMA_RSCP_GOOD_WIFI_BAD>
        <MAPCON_WCDMA_RSCP_BAD_WIFI_GOOD>
          <APN>ims</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <LTEThreshold>
                    <LTEAvailable>0</LTEAvailable>
                    <UMTSRscpLow>-110</UMTSRscpLow>
                    <UMTSAvailable>1</UMTSAvailable>
                  </LTEThreshold>
                  <WiFiThreshold>
                    <WiFiRSSIHigh>-70</WiFiRSSIHigh>
                    <WiFiAvailable>1</WiFiAvailable>
                  </WiFiThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
            </Node>
          </RoutingCriteria>
          <RoutingRule>
            <Node>
              <AccessTechnology>3</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
          </RoutingRule>
          <IsAPIOverride>1</IsAPIOverride>
          <RulePriority>3</RulePriority>
        </MAPCON_WCDMA_RSCP_BAD_WIFI_GOOD>
<!-- GSM call idle, Wifi prefer -->
        <MAPCON_GSM_RSSI_GOOD_WIFI_GOOD>
          <APN>ims</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <LTEThreshold>
                    <LTEAvailable>0</LTEAvailable>
                    <GSMRssiHigh>-95</GSMRssiHigh>
                    <GSMAvailable>1</GSMAvailable>
                  </LTEThreshold>
                  <WiFiThreshold>
                    <WiFiRSSIHigh>-70</WiFiRSSIHigh>
                    <WiFiAvailable>1</WiFiAvailable>
                  </WiFiThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
            </Node>
          </RoutingCriteria>
          <RoutingRule>
            <Node>
              <AccessTechnology>1</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
            <Node>
              <AccessTechnology>3</AccessTechnology>
              <AccessNetworkPriority>2</AccessNetworkPriority>
            </Node>
          </RoutingRule>
          <IsAPIOverride>1</IsAPIOverride>
          <RulePriority>3</RulePriority>
        </MAPCON_GSM_RSSI_GOOD_WIFI_GOOD>
        <MAPCON_GSM_RSSI_BAD_WIFI_BAD>
          <APN>ims</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <LTEThreshold>
                    <LTEAvailable>0</LTEAvailable>
                    <GSMRssiLow>-105</GSMRssiLow>
                    <GSMAvailable>1</GSMAvailable>
                  </LTEThreshold>
                  <WiFiThreshold>
                    <WiFiRSSILow>-80</WiFiRSSILow>
                    <WiFiAvailable>1</WiFiAvailable>
                  </WiFiThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
            </Node>
          </RoutingCriteria>
          <RoutingRule>
            <Node>
              <AccessTechnology>1</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
          </RoutingRule>
          <IsAPIOverride>1</IsAPIOverride>
          <RulePriority>3</RulePriority>
        </MAPCON_GSM_RSSI_BAD_WIFI_BAD>
        <MAPCON_GSM_RSSI_GOOD_WIFI_BAD>
          <APN>ims</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <LTEThreshold>
                    <LTEAvailable>0</LTEAvailable>
                    <GSMRssiHigh>-95</GSMRssiHigh>
                    <GSMAvailable>1</GSMAvailable>
                  </LTEThreshold>
                  <WiFiThreshold>
                    <WiFiRSSILow>-80</WiFiRSSILow>
                    <WiFiAvailable>1</WiFiAvailable>
                  </WiFiThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
            </Node>
          </RoutingCriteria>
          <RoutingRule>
            <Node>
              <AccessTechnology>1</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
          </RoutingRule>
          <IsAPIOverride>1</IsAPIOverride>
          <RulePriority>3</RulePriority>
        </MAPCON_GSM_RSSI_GOOD_WIFI_BAD>
        <MAPCON_GSM_RSSI_BAD_WIFI_GOOD>
          <APN>ims</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <LTEThreshold>
                    <LTEAvailable>0</LTEAvailable>
                    <GSMRssiLow>-105</GSMRssiLow>
                    <GSMAvailable>1</GSMAvailable>
                  </LTEThreshold>
                  <WiFiThreshold>
                    <WiFiRSSIHigh>-70</WiFiRSSIHigh>
                    <WiFiAvailable>1</WiFiAvailable>
                  </WiFiThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
            </Node>
          </RoutingCriteria>
          <RoutingRule>
            <Node>
              <AccessTechnology>3</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
          </RoutingRule>
          <IsAPIOverride>1</IsAPIOverride>
          <RulePriority>3</RulePriority>
        </MAPCON_GSM_RSSI_BAD_WIFI_GOOD>

<!-- GSM call idle, Wifi prefer -->
<!-- call drop beep -->
        <MAPCON_LTE_X_WIFI_O_WIFI_BAD>
          <APN>ims</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <LTEThreshold>
                    <LTEAvailable>0</LTEAvailable>
                  </LTEThreshold>
                  <WiFiThreshold>
                    <WiFiRSSILow>-80</WiFiRSSILow>
                    <WiFiAvailable>1</WiFiAvailable>
                  </WiFiThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
            </Node>
          </RoutingCriteria>
          <RoutingRule>
            <Node>
            </Node>
          </RoutingRule>
          <IsAPIOverride>1</IsAPIOverride>
          <RulePriority>4</RulePriority>
        </MAPCON_LTE_X_WIFI_O_WIFI_BAD>

        <MAPCON_LTE_X_WIFI_O_WIFI_BAD2>
          <APN>ims</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <LTEThreshold>
                    <LTEAvailable>0</LTEAvailable>
                  </LTEThreshold>
                  <WiFiThreshold>
                    <WiFiPERHigh>30</WiFiPERHigh>
                    <WiFiAvailable>1</WiFiAvailable>
                  </WiFiThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
            </Node>
          </RoutingCriteria>
          <RoutingRule>
            <Node>
            </Node>
          </RoutingRule>
          <IsAPIOverride>1</IsAPIOverride>
          <RulePriority>5</RulePriority>
        </MAPCON_LTE_X_WIFI_O_WIFI_BAD2>
<!-- call drop beep -->

        <MAPCON_LTE_X_WIFI_O>
          <APN>ims</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <LTEThreshold>
                    <LTEAvailable>0</LTEAvailable>
                  </LTEThreshold>
                  <WiFiThreshold>
                    <WiFiRSSIHigh>-70</WiFiRSSIHigh>
                    <WiFiAvailable>1</WiFiAvailable>
                  </WiFiThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
            </Node>
          </RoutingCriteria>
          <RoutingRule>
            <Node>
              <AccessTechnology>3</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
          </RoutingRule>
          <IsAPIOverride>1</IsAPIOverride>
          <RulePriority>5</RulePriority>
        </MAPCON_LTE_X_WIFI_O>
        <MAPCON_LTE_GOOD_WIFI_GOOD_CALL_IDLE>
          <APN>ims</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <LTEThreshold>
                    <LTERSRPHigh>-112</LTERSRPHigh>
                    <LTEAvailable>1</LTEAvailable>
                  </LTEThreshold>
                  <WiFiThreshold>
                    <WiFiRSSIHigh>-70</WiFiRSSIHigh>
                    <WiFiAvailable>1</WiFiAvailable>
                  </WiFiThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
              <CallConditions>
                  <Node>
                      <CallType>0</CallType>
                  </Node>
              </CallConditions>
            </Node>
          </RoutingCriteria>
          <RoutingRule>
            <Node>
              <AccessTechnology>1</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
            <Node>
              <AccessTechnology>3</AccessTechnology> <!-- Fallback -->
              <AccessNetworkPriority>2</AccessNetworkPriority>
            </Node>
          </RoutingRule>
          <IsAPIOverride>1</IsAPIOverride>
          <RulePriority>6</RulePriority>
        </MAPCON_LTE_GOOD_WIFI_GOOD_CALL_IDLE>

        <MAPCON_LTE_BAD_WIFI_GOOD_CALL_VOICE>
          <APN>ims</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <LTEThreshold>
                    <LTERSRPLow>-117</LTERSRPLow>
                    <LTEAvailable>1</LTEAvailable>
                  </LTEThreshold>
                  <WiFiThreshold>
                    <WiFiRSSIHigh>-70</WiFiRSSIHigh>
                    <WiFiAvailable>1</WiFiAvailable>
                  </WiFiThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
              <CallConditions>
                  <Node>
                      <CallType>1</CallType>
                  </Node>
              </CallConditions>
            </Node>
          </RoutingCriteria>
          <RoutingRule>
            <Node>
              <AccessTechnology>3</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
          </RoutingRule>
          <IsAPIOverride>1</IsAPIOverride>
          <RulePriority>7</RulePriority>
        </MAPCON_LTE_BAD_WIFI_GOOD_CALL_VOICE>

        <MAPCON_LTE_BAD_WIFI_GOOD_CALL_VIDEO>
          <APN>ims</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <LTEThreshold>
                    <LTERSRPLow>-117</LTERSRPLow>
                    <LTEAvailable>1</LTEAvailable>
                  </LTEThreshold>
                  <WiFiThreshold>
                    <WiFiRSSIHigh>-70</WiFiRSSIHigh>
                    <WiFiAvailable>1</WiFiAvailable>
                  </WiFiThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
              <CallConditions>
                  <Node>
                      <CallType>2</CallType>
                  </Node>
              </CallConditions>
            </Node>
          </RoutingCriteria>
          <RoutingRule>
            <Node>
              <AccessTechnology>3</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
          </RoutingRule>
          <IsAPIOverride>1</IsAPIOverride>
          <RulePriority>7</RulePriority>
        </MAPCON_LTE_BAD_WIFI_GOOD_CALL_VIDEO>
<!-- calltype 3 need to check -->
        <MAPCON_LTE_BAD_WIFI_GOOD_CALL_VOICE_VIDEO>
          <APN>ims</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <LTEThreshold>
                    <LTERSRPLow>-117</LTERSRPLow>
                    <LTEAvailable>1</LTEAvailable>
                  </LTEThreshold>
                  <WiFiThreshold>
                    <WiFiRSSIHigh>-70</WiFiRSSIHigh>
                    <WiFiAvailable>1</WiFiAvailable>
                  </WiFiThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
              <CallConditions>
                  <Node>
                      <CallType>3</CallType>
                  </Node>
              </CallConditions>
            </Node>
          </RoutingCriteria>
          <RoutingRule>
            <Node>
              <AccessTechnology>3</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
          </RoutingRule>
          <IsAPIOverride>1</IsAPIOverride>
          <RulePriority>7</RulePriority>
        </MAPCON_LTE_BAD_WIFI_GOOD_CALL_VOICE_VIDEO>
<!-- calltype 3 need to check -->
        <MAPCON_LTE_GOOD_WIFI_GOOD_CALL_VOICE>
          <APN>ims</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <LTEThreshold>
                    <LTERSRPHigh>-112</LTERSRPHigh>
                    <LTEAvailable>1</LTEAvailable>
                  </LTEThreshold>
                  <WiFiThreshold>
                    <WiFiRSSIHigh>-70</WiFiRSSIHigh>
                    <WiFiPERLow>20</WiFiPERLow>
                    <WiFiAvailable>1</WiFiAvailable>
                  </WiFiThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
              <CallConditions>
                  <Node>
                      <CallType>1</CallType>
                  </Node>
              </CallConditions>
            </Node>
          </RoutingCriteria>
          <RoutingRule>
            <Node>
              <AccessTechnology>1</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
            <Node>
              <AccessTechnology>3</AccessTechnology>
              <AccessNetworkPriority>2</AccessNetworkPriority>
            </Node>
          </RoutingRule>
          <IsAPIOverride>1</IsAPIOverride>
          <RulePriority>8</RulePriority>
        </MAPCON_LTE_GOOD_WIFI_GOOD_CALL_VOICE>

        <MAPCON_LTE_GOOD_WIFI_GOOD_CALL_VIDEO>
          <APN>ims</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <LTEThreshold>
                    <LTERSRPHigh>-112</LTERSRPHigh>
                    <LTEAvailable>1</LTEAvailable>
                  </LTEThreshold>
                  <WiFiThreshold>
                    <WiFiRSSIHigh>-70</WiFiRSSIHigh>
                    <WiFiPERLow>10</WiFiPERLow>
                    <WiFiAvailable>1</WiFiAvailable>
                  </WiFiThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
              <CallConditions>
                  <Node>
                      <CallType>2</CallType>
                  </Node>
              </CallConditions>
            </Node>
          </RoutingCriteria>
          <RoutingRule>
            <Node>
              <AccessTechnology>1</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
            <Node>
              <AccessTechnology>3</AccessTechnology>
              <AccessNetworkPriority>2</AccessNetworkPriority>
            </Node>
          </RoutingRule>
          <IsAPIOverride>1</IsAPIOverride>
          <RulePriority>8</RulePriority>
        </MAPCON_LTE_GOOD_WIFI_GOOD_CALL_VIDEO>
<!-- calltype 3 need to check -->
        <MAPCON_LTE_GOOD_WIFI_GOOD_CALL_VOICE_VIDEO>
          <APN>ims</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <LTEThreshold>
                    <LTERSRPHigh>-112</LTERSRPHigh>
                    <LTEAvailable>1</LTEAvailable>
                  </LTEThreshold>
                  <WiFiThreshold>
                    <WiFiRSSIHigh>-70</WiFiRSSIHigh>
                    <WiFiPERLow>10</WiFiPERLow>
                    <WiFiAvailable>1</WiFiAvailable>
                  </WiFiThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
              <CallConditions>
                  <Node>
                      <CallType>3</CallType>
                  </Node>
              </CallConditions>
            </Node>
          </RoutingCriteria>
          <RoutingRule>
            <Node>
              <AccessTechnology>3</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
            <Node>
              <AccessTechnology>1</AccessTechnology>
              <AccessNetworkPriority>2</AccessNetworkPriority>
            </Node>
          </RoutingRule>
          <IsAPIOverride>1</IsAPIOverride>
          <RulePriority>8</RulePriority>
        </MAPCON_LTE_GOOD_WIFI_GOOD_CALL_VOICE_VIDEO>
<!-- calltype 3 need to check -->
        <MAPCON_LTE_O_WIFI_O_WIFIBAD>
          <APN>ims</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <LTEThreshold>
                    <LTEAvailable>1</LTEAvailable>
                  </LTEThreshold>
                  <WiFiThreshold>
                    <WiFiRSSILow>-80</WiFiRSSILow>
                    <WiFiAvailable>1</WiFiAvailable>
                  </WiFiThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
            </Node>
          </RoutingCriteria>
          <RoutingRule>
            <Node>
              <AccessTechnology>1</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
          </RoutingRule>
          <IsAPIOverride>1</IsAPIOverride>
          <RulePriority>9</RulePriority>
        </MAPCON_LTE_O_WIFI_O_WIFIBAD>

        <MAPCON_LTE_O_WIFI_O_WIFIBAD2>
          <APN>ims</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <LTEThreshold>
                    <LTEAvailable>1</LTEAvailable>
                  </LTEThreshold>
                  <WiFiThreshold>
                    <WiFiPERHigh>30</WiFiPERHigh>
                  </WiFiThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
            </Node>
          </RoutingCriteria>
          <RoutingRule>
            <Node>
              <AccessTechnology>1</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
          </RoutingRule>
          <IsAPIOverride>1</IsAPIOverride>
          <RulePriority>10</RulePriority>
        </MAPCON_LTE_O_WIFI_O_WIFIBAD2>

        <MAPCON_WIFI_GOOD_ROAM_CALL_IDLE>
          <APN>ims</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <WiFiThreshold>
                    <WiFiRSSIHigh>-70</WiFiRSSIHigh>
                    <WiFiAvailable>1</WiFiAvailable>
                  </WiFiThreshold>
                </ThresholdConditions>
                <Roam>1</Roam>
              </OPSpecificRANValidityCondition>
              <CallConditions>
                  <Node>
                  <CallType>0</CallType>
                  </Node>
              </CallConditions>
            </Node>
          </RoutingCriteria>
          <RoutingRule>
            <Node>
              <AccessTechnology>3</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
          </RoutingRule>
          <IsAPIOverride>1</IsAPIOverride>
          <RulePriority>11</RulePriority>
        </MAPCON_WIFI_GOOD_ROAM_CALL_IDLE>

<!-- TMUS APN -->
        <MAPCON_tmus_WIFI_O>
          <APN>tmus</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <WiFiThreshold>
                    <WiFiAvailable>1</WiFiAvailable>
                  </WiFiThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
            </Node>
          </RoutingCriteria>
          <RoutingRule>
            <Node>
              <AccessTechnology>3</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
          </RoutingRule>
          <IsAPIOverride>1</IsAPIOverride>
          <RulePriority>1</RulePriority>
        </MAPCON_tmus_WIFI_O>
<!-- TRF TMO MMS -->
       <MAPCON_service_WIFI_O>
          <APN>service</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <WiFiThreshold>
                    <WiFiAvailable>1</WiFiAvailable>
                  </WiFiThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
            </Node>
          </RoutingCriteria>
          <RoutingRule>
            <Node>
              <AccessTechnology>3</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
          </RoutingRule>
          <IsAPIOverride>1</IsAPIOverride>
          <RulePriority>1</RulePriority>
        </MAPCON_service_WIFI_O>
      </ForServiceBased>
    </Node>
  </ISRP>
</ANDSF>
