<!--
1. IMS Apn : ims
   > IWLAN & Cellular

==============================================================================
- MSR0942_VoWiFi_Ver59 : 2.1 ~ 2.4
 LTE to WiFi when LTE signal strength RSRP is less than or equal to -118dBm
 WiFi to LTE when LTE signal strength RSRP is greater than or equal to -110dBm
 3G to WiFi when 3G signal strength RSCP is less than or equal to -110dBm
 WiFi to 3G when 3G signal strength RSCP is greater than or equal to -106dBm
==============================================================================

-->

<ANDSF version="1">
  <Name>IWLAN and Cellular (240/02 H3G-SE)</Name>
  <ISRP>
    <Node>
      <ForServiceBased>
<!--  ================IMS================ -->
        <MAPCON_WIFI_X_LTE_O_LTEGOOD>
          <APN>IMS</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <WiFiThreshold>
                    <WiFiAvailable>0</WiFiAvailable>
                  </WiFiThreshold>
                  <LTEThreshold>
                    <LTEAvailable>1</LTEAvailable>
                    <LTERSRPHigh>-112</LTERSRPHigh>
                  </LTEThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
            </Node>
          </RoutingCriteria>
          <RoutingRule>
            <Node>
              <AccessTechnology>1</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
          </RoutingRule>
          <IsAPIOverride>1</IsAPIOverride>
          <RulePriority>1</RulePriority>
        </MAPCON_WIFI_X_LTE_O_LTEGOOD>

        <MAPCON_WIFI_O_WIFIGOOD_LTE_X>
         <APN>IMS</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <WiFiThreshold>
                    <WiFiAvailable>1</WiFiAvailable>
                    <WiFiRSSIHigh>-70</WiFiRSSIHigh>
                  </WiFiThreshold>
                  <LTEThreshold>
                    <LTEAvailable>0</LTEAvailable>
                  </LTEThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
            </Node>
          </RoutingCriteria>
          <RoutingRule>
            <Node>
              <AccessTechnology>3</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
          </RoutingRule>
          <IsAPIOverride>1</IsAPIOverride>
          <RulePriority>2</RulePriority>
       </MAPCON_WIFI_O_WIFIGOOD_LTE_X>

       <MAPCON_WIFI_O_WIFIBAD_LTE_O_LTEGOOD>
          <APN>IMS</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <LTEThreshold>
                    <LTERSRPHigh>-112</LTERSRPHigh>
                    <LTEAvailable>1</LTEAvailable>
                  </LTEThreshold>
                  <WiFiThreshold>
                    <WiFiRSSILow>-80</WiFiRSSILow>
                    <WiFiAvailable>1</WiFiAvailable>
                  </WiFiThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
            </Node>
          </RoutingCriteria>
          <RoutingRule>
            <Node>
              <AccessTechnology>1</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
          </RoutingRule>
          <IsAPIOverride>1</IsAPIOverride>
          <RulePriority>3</RulePriority>
        </MAPCON_WIFI_O_WIFIBAD_LTE_O_LTEGOOD>

        <MAPCON_WIFI_O_WIFIGOOD_LTE_O_LTEBAD>
          <APN>IMS</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <WiFiThreshold>
                    <WiFiRSSIHigh>-70</WiFiRSSIHigh>
                    <WiFiAvailable>1</WiFiAvailable>
                  </WiFiThreshold>
                  <LTEThreshold>
                    <LTERSRPLow>-117</LTERSRPLow>
                    <LTEAvailable>1</LTEAvailable>
                  </LTEThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
            </Node>
          </RoutingCriteria>
          <RoutingRule>
            <Node>
              <AccessTechnology>3</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
          </RoutingRule>
          <IsAPIOverride>1</IsAPIOverride>
          <RulePriority>4</RulePriority>
        </MAPCON_WIFI_O_WIFIGOOD_LTE_O_LTEBAD>

        <MAPCON_WIFI_O_WIFIGOOD_LTE_O_LTEGOOD>
          <APN>IMS</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <LTEThreshold>
                    <LTERSRPHigh>-112</LTERSRPHigh>
                    <LTEAvailable>1</LTEAvailable>
                  </LTEThreshold>
                  <WiFiThreshold>
                    <WiFiAvailable>1</WiFiAvailable>
                    <WiFiRSSIHigh>-70</WiFiRSSIHigh>
                  </WiFiThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
            </Node>
          </RoutingCriteria>
          <RoutingRule>
            <Node>
              <AccessTechnology>1</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
            <Node>
              <AccessTechnology>3</AccessTechnology>
              <AccessNetworkPriority>2</AccessNetworkPriority>
            </Node>
          </RoutingRule>
          <IsAPIOverride>1</IsAPIOverride>
          <RulePriority>5</RulePriority>
        </MAPCON_WIFI_O_WIFIGOOD_LTE_O_LTEGOOD>

        <MAPCON_WIFI_O_WIFIBAD_LTE_X>
          <APN>IMS</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <LTEThreshold>
                    <LTEAvailable>0</LTEAvailable>
                  </LTEThreshold>
                  <WiFiThreshold>
                    <WiFiRSSILow>-80</WiFiRSSILow>
                    <WiFiAvailable>1</WiFiAvailable>
                  </WiFiThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
            </Node>
          </RoutingCriteria>
          <IsAPIOverride>1</IsAPIOverride>
          <RulePriority>6</RulePriority>
        </MAPCON_WIFI_O_WIFIBAD_LTE_X>

        <MAPCON_WIFI_O_WIFIBAD_LTE_O_LTEBAD>
          <APN>IMS</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <LTEThreshold>
                    <LTERSRPLow>-117</LTERSRPLow>
                    <LTEAvailable>1</LTEAvailable>
                  </LTEThreshold>
                  <WiFiThreshold>
                    <WiFiRSSILow>-80</WiFiRSSILow>
                    <WiFiAvailable>1</WiFiAvailable>
                  </WiFiThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
            </Node>
          </RoutingCriteria>
          <IsAPIOverride>1</IsAPIOverride>
          <RulePriority>7</RulePriority>
        </MAPCON_WIFI_O_WIFIBAD_LTE_O_LTEBAD>

        <!--  ================XCAP and MMS================ -->
        <MAPCON_WIFI_X_n_Cellular_O>
          <APN>SERVICES</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <WiFiThreshold>
                    <WiFiAvailable>0</WiFiAvailable>
                  </WiFiThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
            </Node>
          </RoutingCriteria>
          <RoutingRule>
            <Node>
              <AccessTechnology>1</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
          </RoutingRule>
          <IsAPIOverride>1</IsAPIOverride>
          <RulePriority>1</RulePriority>
        </MAPCON_WIFI_X_n_Cellular_O>

        <MAPCON_WIFI_O_CELLULAR_X>
          <APN>SERVICES</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <GSMThreshold>
                    <GSMAvailable>0</GSMAvailable>
                  </GSMThreshold>
                  <UMTSThreshold>
                    <UMTSAvailable>0</UMTSAvailable>
                  </UMTSThreshold>
                  <LTEThreshold>
                    <LTEAvailable>0</LTEAvailable>
                  </LTEThreshold>
                  <WiFiThreshold>
                    <WiFiAvailable>1</WiFiAvailable>
                  </WiFiThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
            </Node>
          </RoutingCriteria>
          <RoutingRule>
            <Node>
              <AccessTechnology>3</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
          </RoutingRule>
          <IsAPIOverride>1</IsAPIOverride>
          <RulePriority>2</RulePriority>
        </MAPCON_WIFI_O_CELLULAR_X>

        <MAPCON_WIFI_BAD_n_CELLULAR_O>
          <APN>SERVICES</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <WiFiThreshold>
                    <WiFiRSSILow>-80</WiFiRSSILow>
                    <WiFiAvailable>1</WiFiAvailable>
                  </WiFiThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
            </Node>
          </RoutingCriteria>
          <RoutingRule>
            <Node>
              <AccessTechnology>1</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
          </RoutingRule>
          <IsAPIOverride>1</IsAPIOverride>
          <RulePriority>3</RulePriority>
        </MAPCON_WIFI_BAD_n_CELLULAR_O>

        <MAPCON_WIFI_GOOD_n_CELLULAR_O>
          <APN>SERVICES</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <WiFiThreshold>
                    <WiFiRSSIHigh>-70</WiFiRSSIHigh>
                    <WiFiAvailable>1</WiFiAvailable>
                  </WiFiThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
            </Node>
          </RoutingCriteria>
          <RoutingRule>
            <Node>
              <AccessTechnology>3</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
            <Node>
              <AccessTechnology>1</AccessTechnology>
              <AccessNetworkPriority>2</AccessNetworkPriority>
            </Node>
          </RoutingRule>
          <IsAPIOverride>1</IsAPIOverride>
          <RulePriority>4</RulePriority>
        </MAPCON_WIFI_GOOD_n_CELLULAR_O>

    </ForServiceBased>
    </Node>
  </ISRP>
</ANDSF>


